<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.eureka.dao.ProductDao">

	
	<select id="getProduct" resultType="product">
		SELECT *
		FROM product p
		WHERE product_id=#{product_id};
	</select>
	
	<select id="getCategoryTopList" resultType="product">
		SELECT *
		FROM product p
		WHERE product_category=#{product_category}
		ORDER BY product_count
		limit 0,5;
	</select>
	
	<select id="getProductqna" resultType="productqna">
		SELECT *
		FROM productqna
		WHERE product_id=#{product_id};
	</select>
	
	<select id="getReview" resultType="review">
		SELECT *
		FROM review
		WHERE product_id=#{product_id};
	</select>
	
	<insert id="registProduct">
		INSERT INTO `product` (product_name, product_category, product_price, product_img, product_rating, product_brand, product_deliveryprice, product_detailimg, product_count, member_userid) 
		VALUES (#{product_name}, #{product_category}, #{product_price}, #{product_img}, #{product_rating}, #{product_brand}, #{product_deliveryprice}, #{product_detailimg}, #{product_count}, #{member_userid});
	</insert>
	

	<delete id="deleteProduct" parameterType="String">
		DELETE FROM product
		WHERE product_id = #{product_id}
	</delete>
	
	<update id="modifyProduct" parameterType="Product">
		UPDATE product
		SET product_name = #{product_name},  
			product_category = #{product_category}, 
			product_price = #{product_price},	  
			product_img =#{product_img}, 
			product_rating = #{product_rating},  
			product_brand = #{product_brand},  
			product_deliveryprice =#{product_deliveryprice},  
			product_detailimg = #{product_detailimg},  
			product_count = #{product_count},  
			member_userid = #{member_userid}
		WHERE product_id = #{product_id}
	</update>
	
	
	<select id="showSearchResult" parameterType="String" resultType="product">
		SELECT *
		FROM product p
		WHERE product_name  LIKE concat('%', #{keyword}, '%')
		OR product_brand LIKE concat('%', #{keyword}, '%')
		OR product_category LIKE concat('%', #{keyword}, '%');
	</select>
</mapper>







