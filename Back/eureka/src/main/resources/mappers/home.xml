<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.eureka.dao.HomeDao">
	<select id="getRandomTopProductsByCategory" resultType="product">
		SELECT od.orderdetail_count, od.product_id, p.product_brand, p.product_category, p.product_deliveryprice, p.product_img, p.product_discount, p.product_price, p.product_name, p.product_rating
		FROM orderdetail od
		JOIN product p
		ON od.product_id = p.product_id
		WHERE truncate(p.product_category/100, 0) = #{randValue}
		ORDER BY orderdetail_count DESC
		LIMIT #{n};
	</select>

</mapper>







